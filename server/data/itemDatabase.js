// Master Item Database - All items in the game
export const ITEMS = {
  // ========== CONSUMABLES ==========
  health_potion_small: {
    id: 'health_potion_small',
    name: 'Small HP Potion',
    icon: 'ðŸ§ª',
    type: 'consumable',
    subtype: 'potion',
    rarity: 'common',
    stackable: true,
    maxStack: 99,
    usable: true,
    effect: { type: 'heal', value: 50 },
    sellPrice: 10,
    buyPrice: 25
  },
  health_potion_medium: {
    id: 'health_potion_medium',
    name: 'Medium HP Potion',
    icon: 'ðŸ§ª',
    type: 'consumable',
    subtype: 'potion',
    rarity: 'uncommon',
    stackable: true,
    maxStack: 99,
    usable: true,
    effect: { type: 'heal', value: 120 },
    sellPrice: 25,
    buyPrice: 60
  },
  mana_potion_small: {
    id: 'mana_potion_small',
    name: 'Small MP Potion',
    icon: 'ðŸ’Ž',
    type: 'consumable',
    subtype: 'potion',
    rarity: 'common',
    stackable: true,
    maxStack: 99,
    usable: true,
    effect: { type: 'mana', value: 30 },
    sellPrice: 8,
    buyPrice: 20
  },
  mana_potion_medium: {
    id: 'mana_potion_medium',
    name: 'Medium MP Potion',
    icon: 'ðŸ’Ž',
    type: 'consumable',
    subtype: 'potion',
    rarity: 'uncommon',
    stackable: true,
    maxStack: 99,
    usable: true,
    effect: { type: 'mana', value: 80 },
    sellPrice: 20,
    buyPrice: 50
  },
  antidote: {
    id: 'antidote',
    name: 'Antidote',
    icon: 'ðŸŒ¿',
    type: 'consumable',
    subtype: 'potion',
    rarity: 'common',
    stackable: true,
    maxStack: 99,
    usable: true,
    effect: { type: 'cure_poison' },
    sellPrice: 6,
    buyPrice: 15
  },
  energy_drink: {
    id: 'energy_drink',
    name: 'Energy Drink',
    icon: 'âš¡',
    type: 'consumable',
    subtype: 'potion',
    rarity: 'rare',
    stackable: true,
    maxStack: 99,
    usable: true,
    effect: { type: 'energy', value: 25 },
    sellPrice: 40,
    buyPrice: 100
  },

  // ========== MATERIALS - Tower 1 ==========
  bone_fragment: {
    id: 'bone_fragment',
    name: 'Bone Fragment',
    icon: 'ðŸ¦´',
    type: 'material',
    subtype: 'drop',
    rarity: 'common',
    stackable: true,
    maxStack: 999,
    usable: false,
    sellPrice: 2,
    buyPrice: 0
  },
  cursed_cloth: {
    id: 'cursed_cloth',
    name: 'Cursed Cloth',
    icon: 'ðŸ§µ',
    type: 'material',
    subtype: 'drop',
    rarity: 'common',
    stackable: true,
    maxStack: 999,
    usable: false,
    sellPrice: 3,
    buyPrice: 0
  },
  ghost_essence: {
    id: 'ghost_essence',
    name: 'Ghost Essence',
    icon: 'ðŸ‘»',
    type: 'material',
    subtype: 'drop',
    rarity: 'uncommon',
    stackable: true,
    maxStack: 999,
    usable: false,
    sellPrice: 5,
    buyPrice: 0
  },
  dark_crystal: {
    id: 'dark_crystal',
    name: 'Dark Crystal',
    icon: 'ðŸ’Ž',
    type: 'material',
    subtype: 'drop',
    rarity: 'uncommon',
    stackable: true,
    maxStack: 999,
    usable: false,
    sellPrice: 8,
    buyPrice: 0
  },
  death_mark: {
    id: 'death_mark',
    name: 'Death Mark',
    icon: 'ðŸ’€',
    type: 'material',
    subtype: 'drop',
    rarity: 'rare',
    stackable: true,
    maxStack: 999,
    usable: false,
    sellPrice: 15,
    buyPrice: 0
  },
  soul_shard: {
    id: 'soul_shard',
    name: 'Soul Shard',
    icon: 'âœ¨',
    type: 'material',
    subtype: 'drop',
    rarity: 'rare',
    stackable: true,
    maxStack: 999,
    usable: false,
    sellPrice: 20,
    buyPrice: 0
  },

  // ========== MATERIALS - Tower 2 ==========
  sea_scale: {
    id: 'sea_scale',
    name: 'Sea Scale',
    icon: 'ðŸš',
    type: 'material',
    subtype: 'drop',
    rarity: 'common',
    stackable: true,
    maxStack: 999,
    usable: false,
    sellPrice: 4,
    buyPrice: 0
  },
  coral_piece: {
    id: 'coral_piece',
    name: 'Coral Piece',
    icon: 'ðŸª¸',
    type: 'material',
    subtype: 'drop',
    rarity: 'common',
    stackable: true,
    maxStack: 999,
    usable: false,
    sellPrice: 5,
    buyPrice: 0
  },
  siren_tear: {
    id: 'siren_tear',
    name: 'Siren Tear',
    icon: 'ðŸ’§',
    type: 'material',
    subtype: 'drop',
    rarity: 'uncommon',
    stackable: true,
    maxStack: 999,
    usable: false,
    sellPrice: 10,
    buyPrice: 0
  },
  deep_pearl: {
    id: 'deep_pearl',
    name: 'Deep Pearl',
    icon: 'ðŸ”®',
    type: 'material',
    subtype: 'drop',
    rarity: 'uncommon',
    stackable: true,
    maxStack: 999,
    usable: false,
    sellPrice: 12,
    buyPrice: 0
  },
  abyssal_ink: {
    id: 'abyssal_ink',
    name: 'Abyssal Ink',
    icon: 'ðŸ–¤',
    type: 'material',
    subtype: 'drop',
    rarity: 'rare',
    stackable: true,
    maxStack: 999,
    usable: false,
    sellPrice: 18,
    buyPrice: 0
  },
  kraken_tooth: {
    id: 'kraken_tooth',
    name: 'Kraken Tooth',
    icon: 'ðŸ¦·',
    type: 'material',
    subtype: 'drop',
    rarity: 'rare',
    stackable: true,
    maxStack: 999,
    usable: false,
    sellPrice: 25,
    buyPrice: 0
  },
  leviathan_scale: {
    id: 'leviathan_scale',
    name: 'Leviathan Scale',
    icon: 'ðŸ‰',
    type: 'material',
    subtype: 'drop',
    rarity: 'epic',
    stackable: true,
    maxStack: 999,
    usable: false,
    sellPrice: 50,
    buyPrice: 0
  },

  // ========== SPECIAL MATERIALS ==========
  memory_crystal_fragment: {
    id: 'memory_crystal_fragment',
    name: 'Memory Crystal Fragment',
    icon: 'ðŸ’ ',
    type: 'material',
    subtype: 'special',
    rarity: 'epic',
    stackable: true,
    maxStack: 99,
    usable: false,
    sellPrice: 100,
    buyPrice: 0,
    description: 'Combine 15 to create Memory Crystal'
  },
  memory_crystal: {
    id: 'memory_crystal',
    name: 'Memory Crystal',
    icon: 'ðŸ”·',
    type: 'special',
    subtype: 'unique',
    rarity: 'legendary',
    stackable: false,
    maxStack: 1,
    usable: true,
    sellPrice: 0,
    buyPrice: 0,
    description: 'Use to remove Hidden Class and receive scroll back'
  },

  // ========== SCROLLS ==========
  scroll_flameblade: {
    id: 'scroll_flameblade',
    name: 'Flameblade Scroll',
    icon: 'ðŸ“œðŸ”¥',
    type: 'scroll',
    subtype: 'hidden_class',
    rarity: 'legendary',
    stackable: false,
    maxStack: 1,
    usable: true,
    requiredClass: 'swordsman',
    grantsClass: 'flameblade',
    sellPrice: 0,
    buyPrice: 0
  },
  scroll_shadow_dancer: {
    id: 'scroll_shadow_dancer',
    name: 'Shadow Dancer Scroll',
    icon: 'ðŸ“œðŸŒ‘',
    type: 'scroll',
    subtype: 'hidden_class',
    rarity: 'legendary',
    stackable: false,
    maxStack: 1,
    usable: true,
    requiredClass: 'thief',
    grantsClass: 'shadowDancer',
    sellPrice: 0,
    buyPrice: 0
  },
  scroll_storm_ranger: {
    id: 'scroll_storm_ranger',
    name: 'Storm Ranger Scroll',
    icon: 'ðŸ“œâš¡',
    type: 'scroll',
    subtype: 'hidden_class',
    rarity: 'legendary',
    stackable: false,
    maxStack: 1,
    usable: true,
    requiredClass: 'archer',
    grantsClass: 'stormRanger',
    sellPrice: 0,
    buyPrice: 0
  },
  scroll_frost_weaver: {
    id: 'scroll_frost_weaver',
    name: 'Frost Weaver Scroll',
    icon: 'ðŸ“œâ„ï¸',
    type: 'scroll',
    subtype: 'hidden_class',
    rarity: 'legendary',
    stackable: false,
    maxStack: 1,
    usable: true,
    requiredClass: 'mage',
    grantsClass: 'frostWeaver',
    sellPrice: 0,
    buyPrice: 0
  },

  // ========== EQUIPMENT - WEAPONS ==========
  wooden_sword: {
    id: 'wooden_sword',
    name: 'Wooden Sword',
    icon: 'ðŸ—¡ï¸',
    type: 'equipment',
    subtype: 'weapon',
    slot: 'leftHand',
    rarity: 'common',
    stackable: false,
    maxStack: 1,
    usable: false,
    equippable: true,
    classReq: 'swordsman',
    stats: { str: 2 },
    sellPrice: 5,
    buyPrice: 15
  },
  rusty_sword: {
    id: 'rusty_sword',
    name: 'Rusty Sword',
    icon: 'âš”ï¸',
    type: 'equipment',
    subtype: 'weapon',
    slot: 'leftHand',
    rarity: 'common',
    stackable: false,
    maxStack: 1,
    usable: false,
    equippable: true,
    classReq: 'swordsman',
    stats: { str: 3 },
    sellPrice: 8,
    buyPrice: 25
  },
  soldier_sword: {
    id: 'soldier_sword',
    name: "Soldier's Sword",
    icon: 'âš”ï¸',
    type: 'equipment',
    subtype: 'weapon',
    slot: 'leftHand',
    rarity: 'uncommon',
    stackable: false,
    maxStack: 1,
    usable: false,
    equippable: true,
    classReq: 'swordsman',
    stats: { str: 6, vit: 2 },
    sellPrice: 30,
    buyPrice: 100
  },
  iron_dagger: {
    id: 'iron_dagger',
    name: 'Iron Dagger',
    icon: 'ðŸ—¡ï¸',
    type: 'equipment',
    subtype: 'weapon',
    slot: 'leftHand',
    rarity: 'common',
    stackable: false,
    maxStack: 1,
    usable: false,
    equippable: true,
    classReq: 'thief',
    stats: { agi: 3 },
    sellPrice: 8,
    buyPrice: 25
  },
  wooden_bow: {
    id: 'wooden_bow',
    name: 'Wooden Bow',
    icon: 'ðŸ¹',
    type: 'equipment',
    subtype: 'weapon',
    slot: 'leftHand',
    rarity: 'common',
    stackable: false,
    maxStack: 1,
    usable: false,
    equippable: true,
    classReq: 'archer',
    stats: { dex: 3 },
    sellPrice: 8,
    buyPrice: 25
  },
  hunter_bow: {
    id: 'hunter_bow',
    name: "Hunter's Bow",
    icon: 'ðŸ¹',
    type: 'equipment',
    subtype: 'weapon',
    slot: 'leftHand',
    rarity: 'uncommon',
    stackable: false,
    maxStack: 1,
    usable: false,
    equippable: true,
    classReq: 'archer',
    stats: { dex: 6, agi: 2 },
    sellPrice: 30,
    buyPrice: 100
  },
  apprentice_staff: {
    id: 'apprentice_staff',
    name: 'Apprentice Staff',
    icon: 'ðŸª„',
    type: 'equipment',
    subtype: 'weapon',
    slot: 'leftHand',
    rarity: 'common',
    stackable: false,
    maxStack: 1,
    usable: false,
    equippable: true,
    classReq: 'mage',
    stats: { int: 3 },
    sellPrice: 8,
    buyPrice: 25
  },

  // ========== EQUIPMENT - ARMOR ==========
  torn_hood: {
    id: 'torn_hood',
    name: 'Torn Hood',
    icon: 'ðŸ§¢',
    type: 'equipment',
    subtype: 'armor',
    slot: 'head',
    rarity: 'common',
    stackable: false,
    maxStack: 1,
    usable: false,
    equippable: true,
    stats: { agi: 2 },
    sellPrice: 5,
    buyPrice: 15
  },
  leather_vest: {
    id: 'leather_vest',
    name: 'Leather Vest',
    icon: 'ðŸ‘•',
    type: 'equipment',
    subtype: 'armor',
    slot: 'body',
    rarity: 'common',
    stackable: false,
    maxStack: 1,
    usable: false,
    equippable: true,
    stats: { vit: 3 },
    sellPrice: 8,
    buyPrice: 25
  },
  shadow_cloak: {
    id: 'shadow_cloak',
    name: 'Shadow Cloak',
    icon: 'ðŸ§¥',
    type: 'equipment',
    subtype: 'armor',
    slot: 'body',
    rarity: 'uncommon',
    stackable: false,
    maxStack: 1,
    usable: false,
    equippable: true,
    stats: { agi: 5, dex: 3 },
    sellPrice: 35,
    buyPrice: 120
  },
  mage_robe: {
    id: 'mage_robe',
    name: 'Mage Robe',
    icon: 'ðŸ‘˜',
    type: 'equipment',
    subtype: 'armor',
    slot: 'body',
    rarity: 'uncommon',
    stackable: false,
    maxStack: 1,
    usable: false,
    equippable: true,
    stats: { int: 5, vit: 2 },
    sellPrice: 35,
    buyPrice: 120
  },
  leather_pants: {
    id: 'leather_pants',
    name: 'Leather Pants',
    icon: 'ðŸ‘–',
    type: 'equipment',
    subtype: 'armor',
    slot: 'leg',
    rarity: 'common',
    stackable: false,
    maxStack: 1,
    usable: false,
    equippable: true,
    stats: { vit: 2 },
    sellPrice: 6,
    buyPrice: 20
  },
  leather_boots: {
    id: 'leather_boots',
    name: 'Leather Boots',
    icon: 'ðŸ‘¢',
    type: 'equipment',
    subtype: 'armor',
    slot: 'shoes',
    rarity: 'common',
    stackable: false,
    maxStack: 1,
    usable: false,
    equippable: true,
    stats: { agi: 2 },
    sellPrice: 6,
    buyPrice: 20
  },
  wooden_shield: {
    id: 'wooden_shield',
    name: 'Wooden Shield',
    icon: 'ðŸ›¡ï¸',
    type: 'equipment',
    subtype: 'shield',
    slot: 'rightHand',
    rarity: 'common',
    stackable: false,
    maxStack: 1,
    usable: false,
    equippable: true,
    classReq: 'swordsman',
    stats: { vit: 3 },
    sellPrice: 8,
    buyPrice: 25
  },
  copper_ring: {
    id: 'copper_ring',
    name: 'Copper Ring',
    icon: 'ðŸ’',
    type: 'equipment',
    subtype: 'accessory',
    slot: 'ring',
    rarity: 'common',
    stackable: false,
    maxStack: 1,
    usable: false,
    equippable: true,
    stats: { str: 1, agi: 1 },
    sellPrice: 10,
    buyPrice: 30
  },
  bone_necklace: {
    id: 'bone_necklace',
    name: 'Bone Necklace',
    icon: 'ðŸ“¿',
    type: 'equipment',
    subtype: 'accessory',
    slot: 'necklace',
    rarity: 'common',
    stackable: false,
    maxStack: 1,
    usable: false,
    equippable: true,
    stats: { vit: 2 },
    sellPrice: 10,
    buyPrice: 30
  }
};

// Get all items as array for search
export function getAllItems() {
  return Object.values(ITEMS);
}

// Search items by name
export function searchItems(query) {
  const q = query.toLowerCase();
  return Object.values(ITEMS).filter(item => 
    item.name.toLowerCase().includes(q) || item.id.toLowerCase().includes(q)
  );
}

// Get item by ID
export function getItemById(itemId) {
  return ITEMS[itemId] || null;
}

// Get items by type
export function getItemsByType(type) {
  return Object.values(ITEMS).filter(item => item.type === type);
}

// Check if items can stack
export function canStack(item1, item2) {
  if (!item1.stackable || !item2.stackable) return false;
  if (item1.id !== item2.id) return false;
  return true;
}
